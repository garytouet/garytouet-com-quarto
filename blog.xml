<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Gary Touet</title>
<link>https://garytouet.com/blog.html</link>
<atom:link href="https://garytouet.com/blog.xml" rel="self" type="application/rss+xml"/>
<description>A mix of my own writing and links to what I find interesting.</description>
<language>en</language>
<generator>quarto-1.8.27</generator>
<lastBuildDate>Thu, 29 Jan 2026 00:00:00 GMT</lastBuildDate>
<item>
  <title>Reading: ‚ÄòThe Data Warehouse Toolkit: The Definitive Guide to Dimensional Modeling‚Äô by Ralph Kimball and Margy Ross</title>
  <dc:creator>Gary Touet</dc:creator>
  <link>https://garytouet.com/post/2026/data-warehouse-toolkit-definitive-guide-to-dimensional-modelling/</link>
  <description><![CDATA[ 




<p>A Lead Data Engineer recommended this book while we collaborated on a business intelligence project. Our product depended on a data warehouse built by our team. As his Product Manager counterpart, we frequently discussed changes affecting the warehouse. He often cited best practices from this book, a standard in the industry.</p>
<p>While I could discuss the pros and cons of data modeling choices with him, I lacked the vocabulary and deeper conceptual knowledge to match his expertise. Throughout my career, I have worked extensively with data warehouses and handled light data engineering projects myself, but I never built a full dimensional model.</p>
<p>Understanding these concepts and techniques seemed valuable. Online, this book is often called <em>the</em> guide to data modelling and data warehousing, a classic for all data engineers. Naturally curious, I decided to give it a go.</p>
<p>I read the book cover to cover and didn‚Äôt skip any section. At 23 hours (per my Kindle), it is a long read. But, it‚Äôs also dense and practical.</p>
<p>In the following sections, I will highlight what stuck with me (the ideas I intend to remember) and reflect on how they connect to my own work experience. Several parts of the book brought back memories from past companies.</p>
<section id="most-salient-sectionsconcepts-for-me" class="level2">
<h2 class="anchored" data-anchor-id="most-salient-sectionsconcepts-for-me">Most salient sections/concepts for me</h2>
<section id="the-four-key-decisions-when-designing-a-dimensional-model" class="level3">
<h3 class="anchored" data-anchor-id="the-four-key-decisions-when-designing-a-dimensional-model">The four key decisions when designing a dimensional model</h3>
<p><strong>1. Select the business process</strong></p>
<p>The advice is: start by modeling a business process. KPIs, metrics, reports can then be built on this fondation. Do not design your dimensional model based on the KPIs and reports available.</p>
<p>Excerpt from the book:</p>
<blockquote class="blockquote">
<p>Business processes are the operational activities performed by your organization, such as taking an order, processing an insurance claim, registering students for a class, or snapshotting every account each month.</p>
</blockquote>
<p><strong>2. Declare the grain</strong></p>
<p>The grain defines the level of detail for the dataset i.e.&nbsp;what a single fact table row represents.</p>
<p>Choose the lowest possible grain (<em>atomic grain</em>) from the source systems. This approach offers the most flexibility. Users can then aggregate and manipulate the data as they wish.</p>
<p><strong>3. Identify the dimensions</strong></p>
<p>Dimensions provide the context for a business process event. For example, when a sale happens, the context dimensions are date, product, store, payment method, promotion.</p>
<p>In reports, dimensions serve as descriptive attributes (typically text labels). They are also used to filter the facts and to form groups during aggregation.</p>
<p><strong>4. Identify the facts</strong></p>
<p>Facts are the numeric measurements tied to a business event. All facts for a single event are stored in one table, which includes foreign keys. These keys link each fact row to its associated dimensions (the context information).</p>
<p>From the book:</p>
<blockquote class="blockquote">
<p>Facts are the measurements that result from a business process event and are almost always numeric. A single fact table row has a one-to-one relationship to a measurement event as described by the fact table‚Äôs grain. Thus a fact table corresponds to a physical observable event, and not to the demands of a particular report. Within a fact table, only facts consistent with the declared grain are allowed. For example, in a retail sales transaction, the quantity of a product sold and its extended price are good facts, whereas the store manager‚Äôs salary is disallowed.</p>
</blockquote>
</section>
<section id="business-participation" class="level3">
<h3 class="anchored" data-anchor-id="business-participation">Business participation</h3>
<p>The authors emphasise that strong business buy-in is essential for project success. This makes sense, but two points stood out to me. They were not obvious at first and I found them particularly valuable:</p>
<ol type="1">
<li><p>Staff the project with business team members, who are also responsible for its success. Give them responsibilities and ask them to gather requirements, feedback, validate certain decisions and spread the word in the organisation.</p></li>
<li><p>Establish a data stewardship/governance program beforehand, with identifiable data stewards. As the book states:</p>
<blockquote class="blockquote">
<p>Data stewardship or governance programs should focus first on the major dimensions. Depending on the industry, the list might include date, customer, product, employee, facility, provider, student, faculty, account, and so on. Thinking about the central nouns used to describe the business translates into a list of data governance efforts to be led by subject matter experts from the business community. Establishing data governance responsibilities for these nouns is the key to eventually deploying dimensions that deliver consistency and address the business‚Äôs needs for analytic filtering, grouping, and labeling. Robust dimensions translate into robust DW/BI systems.</p>
</blockquote></li>
</ol>
</section>
<section id="the-three-fundamental-types-of-fact-tables" class="level3">
<h3 class="anchored" data-anchor-id="the-three-fundamental-types-of-fact-tables">The three fundamental types of fact tables</h3>
<ol type="1">
<li><p><strong>Transaction fact tables:</strong> these are the most common in my experience. Each row represents a single measurement at a specific time and place. It can be an event or one line item inside an event. Rows only exist if an activity occurred. The word <em>transaction</em> is confusing here, because it suggests a table with sales data. In practice, they are not limited to measuring sales.</p></li>
<li><p><strong>Periodic snapshot fact tables:</strong> these tables summarise measurement events over a fixed period (a day, week, month, ‚Ä¶). The grain is determined by the period selected. Unlike transaction tables, rows exist even if no activity took place. For example, I have used these to analyse the daily availability of inventory. A daily snapshot for each product and country was created with its availability status and its quantity.</p></li>
<li><p><strong>Accumulating snapshot fact tables:</strong> these tables represent the advancement of processes that have a clear start, standard intermediate steps and a clear end. Each row updates whenever the process reaches a new step, recording the data and relevant measurements. This structure simplifies calculating the time duration between various steps.</p>
<p>Illustration from the book:</p>
<blockquote class="blockquote">
<p><img src="https://garytouet.com/post/2026/data-warehouse-toolkit-definitive-guide-to-dimensional-modelling/screenshot-accumulating-snapsghot-fact-table-example.png" class="img-fluid" style="width:75.0%"></p>
</blockquote></li>
</ol>
<p>Variations and adaptations of these fact tables:</p>
<ol type="1">
<li>Factless fact tables</li>
<li>Aggregate fact tables or OLAP cubes</li>
<li>Consolidated fact tables</li>
</ol>
</section>
<section id="scds-slowly-changing-dimensions" class="level3">
<h3 class="anchored" data-anchor-id="scds-slowly-changing-dimensions">SCDs: Slowly Changing Dimensions</h3>
<p>Describing these techniques succinctly is challenging. My notes below will make sense if you‚Äôve read the chapters. Otherwise, the explanations may seem abstract.</p>
<p>This section taught me the most about dimensional design, associated trade-offs and opened my mind to technical complexity. I‚Äôll admit: some SCD types took me multiple attempts to grasp. The book‚Äôs case studies were helpful for clarifying these concepts.</p>
<p>These techniques address a fundamental challenge: how to manage attribute changes in dimensions over time. For example, let‚Äôs imagine that a company updates its product categorisation system. A product previously in <em>Sports</em> is now in <em>Streetwear</em>. How should the dimension table reflect this change?</p>
<p>Five core types:</p>
<ul>
<li><strong>Type 0</strong>: retain the original
<ul>
<li>consequence: facts can only be associated with the attribute‚Äôs original value</li>
</ul></li>
<li><strong>Type 1</strong>: overwrite
<ul>
<li>consequence: facts can only be associated with the attribute‚Äôs current value</li>
</ul></li>
<li><strong>Type 2</strong>: add new row
<ul>
<li>introduce a new surrogate key</li>
<li>introduce ‚Äúrow effective date‚Äù and ‚Äúrow expiration date‚Äù columns</li>
<li>optional: add a ‚Äúcurrent row indicator‚Äù column</li>
<li>consequence: facts are associated with the attribute‚Äôs value in effect when the fact happened</li>
</ul></li>
<li><strong>Type 3</strong>: add new attribute
<ul>
<li>replace current attribute value in the target column</li>
<li>add a new column: ‚Äúprior {attribute name}‚Äù which stores the attribute value</li>
<li>consequence: facts can be associated with the current and prior attribute value</li>
</ul></li>
<li><strong>Type 4</strong>: add mini-dimension
<ul>
<li>useful for large dimension tables (lots of rows) where Type 2 changes are frequent (which adds many rows)</li>
<li>move frequently changing attributes to a separate dimension (seems to be frequent for customer demographics dimensions). Leave stable attributes in the original table.</li>
<li>create one row in the mini-dimension for each combination of attribute values. Alternatively, add rows only for existing combinations and update as new ones appear.</li>
<li>consider creating value bands for continuous attributes (convert salary to salary bands, for example)</li>
<li>finally, insert a foreign key to the mini-dimension in the <em>fact</em> table. It captures a snapshot of the combination of attributes (for example: the customer demographics profile) at transaction time.</li>
</ul></li>
</ul>
<p>3 hybrid types:</p>
<ul>
<li><strong>Type 5</strong>: mini-dimension and type 1 outrigger
<ul>
<li>this builds on Type 4 by adding a foreign key to the mini-dimension in the large <em>dimension</em> table (outrigger)</li>
<li>example: in a large customer dimension with a mini-dimension for demographic attributes, each time the demographic profile is updated the foreign key in the customer dimension gets updated (Type 1 change)</li>
<li>the fact table provides the demographic profile at transaction time, while the customer dimension reflects the current profile</li>
</ul></li>
<li><strong>Type 6</strong>: add Type 1 attributes to Type 2 dimension
<ul>
<li>note: the name is confusing. It feels like a more advanced Type 3 SCD to me</li>
<li>Example: with two columns, ‚Äúhistoric department name‚Äù and ‚Äúcurrent department name‚Äù (similar to a Type 3 setup)</li>
<li>when the department name changes:
<ul>
<li>apply Type 2: create a new row with ‚Äúrow effective date‚Äù, ‚Äúrow expiration date‚Äù and ‚Äúcurrent row indicator‚Äù columns with the correct dates/timestamps</li>
<li>apply Type 1: update the ‚Äúcurrent department name‚Äù value</li>
</ul></li>
<li>facts join with the row active at transaction time, which also include the current attribute value</li>
</ul></li>
<li><strong>Type 7</strong>: dual Type 1 and Type 2 dimensions
<ul>
<li>the fact table includes two foreign keys:
<ol type="1">
<li>one links to a dimension table managed according to Type 6</li>
<li>one links to a view of this dimension table showing only current values</li>
</ol></li>
<li>Benefit: when the fact table is queried, a choice is available. Use the historical values to filter and group by, or use the latest status</li>
</ul></li>
</ul>
</section>
<section id="case-study-on-clickstream-data" class="level3">
<h3 class="anchored" data-anchor-id="case-study-on-clickstream-data">Case study on Clickstream data</h3>
<p>Most of my analyst experience is in e-commerce, where Google Analytics clickstream data was the primary data source.</p>
<p>I was curious to see how the authors recommended integrating this data into the data warehouse, for the following reasons:</p>
<ol type="1">
<li>Google Analytics‚Äô raw data, once exported to BigQuery, is heavily nested, with a schema that takes time to master. Expecting analysts from other parts of the company or other disciplines to use is not realistic. The learning curve is too steep</li>
<li>At Zalando, clickstream data resided outside the data warehouse in a separate system (BigQuery). Joining it with the data warehouse was costly due to time-consuming data transfers.</li>
</ol>
<p>The authors outline a solution in their case study, using these building blocks:</p>
<ul>
<li>New dimensions: Page, Event, Session, Referrer. I‚Äôd also include User</li>
<li>Two fact tables: one at the <em>Session</em> grain and one at the <em>Page</em> grain. The <em>Page</em> fact table is a novel idea for me. In theory, it could track event counts per page or measurements like loading times. In practice, it would be challenging to maintain due to frequent changes in web and app experiences</li>
<li>Aggregate clickstream fact tables: create tables at different grains (session, month, entry page, etc.) to summarise facts</li>
</ul>
<p>From experience, aggregate fact tables strike me as the most practical and valuable approach. This makes for much smaller tables to query (raw clickstream data is very large). Key user behaviour facts become easily accessible. And these tables can be intelligently augmented with new attributes (for example: a flag for sessions with cart abandonment, likelihood score of being a bot).</p>
</section>
<section id="audit-dimensions-and-error-event-schema" class="level3">
<h3 class="anchored" data-anchor-id="audit-dimensions-and-error-event-schema">Audit dimensions and error event schema</h3>
<p>I wish I had these for debugging in the past or to investigate sudden changes in metrics.</p>
<p>I saw audit dimensions in action in a previous freelance project. For example, it let us trace suspicious numbers back to the exact ingested file. It allowed us to answer questions from business stakeholders with precision. Excerpt from the book with more details:</p>
<blockquote class="blockquote">
<p>When a fact table row is created in the ETL back room, it is helpful to create an audit dimension containing the ETL processing metadata known at the time. A simple audit dimension row could contain one or more basic indicators of data quality, perhaps derived from examining an error event schema that records data quality violations encountered while processing the data. Other useful audit dimension attributes could include environment variables describing the versions of ETL code used to create the fact rows or the ETL process execution time stamps. These environment variables are especially useful for compliance and auditing purposes because they enable BI tools to drill down to determine which rows were created with what versions of the ETL software.</p>
</blockquote>
<p>Error datasets:</p>
<blockquote class="blockquote">
<p>The error event schema is a centralized dimensional schema whose purpose is to record every error event thrown by a quality screen anywhere in the ETL pipeline.</p>
</blockquote>
<p>I have never encountered such error tables. But, as a data warehouse user, I would appreciate this transparency.</p>
</section>
<section id="conformed-dimensions" class="level3">
<h3 class="anchored" data-anchor-id="conformed-dimensions">Conformed dimensions</h3>
<p>From the book:</p>
<blockquote class="blockquote">
<p>Dimension tables <em>conform</em> when attributes in separate dimension tables have the same column names and domain contents. Information from separate fact tables can be combined in a single report by using conformed dimension attributes that are associated with each fact table.</p>
<p>[‚Ä¶]</p>
<p><em>Conformed dimensions</em>, defined once in collaboration with the business‚Äôs data governance representatives, are reused across fact tables; they deliver both analytic consistency and reduced future development costs because the wheel is not repeatedly re-created.</p>
<p>[‚Ä¶]</p>
<p>Without shared, conformed dimensions, a dimensional model becomes a standalone application. Isolated stovepipe data sets that cannot be tied together are the bane of the DW/BI movement as they perpetuate incompatible views of the enterprise. If you have any hope of building a robust and integrated DW/BI environment, you must commit to the enterprise bus architecture. When dimensional models have been designed with conformed dimensions, they can be readily combined and used together.</p>
</blockquote>
<p>Conformed dimensions are a clear advantage of dimensional models and are essential to their success. However, the effort required to achieve this conformity is easy to underestimate. Agreeing across departments on consistant names, values and definitions for business concepts is challenging. This is especially true when systems have evolved organically in different parts of the organisation or come from multiple vendors.</p>
</section>
</section>
<section id="reflections" class="level2">
<h2 class="anchored" data-anchor-id="reflections">Reflections</h2>
<section id="data-as-a-product" class="level3">
<h3 class="anchored" data-anchor-id="data-as-a-product">Data as a Product</h3>
<p>The book does not describe it in these terms. However, it is clear that the authors advocate for the application of the product management method to the design of the data warehouse. They suggest a close relationship with the end users, understanding their needs and designing the dimensional model in accordance. They urge readers to consider the value to the business when making decisions. In many of their design guidelines, they emphasise ease of use for business teams. They recommend design solutions that engineers might view as suboptimal or overly complex in service of user experience. This is obviously how it should be.</p>
<p>It made me think of a principle that a former employer added to their group data strategy: ‚Äú<em>data as a product</em>‚Äù. The goal was to change the company‚Äôs thinking on this subject. This principle especially targeted data-producing teams, encouraging them to treat data as part of their product surface area. One-sided schema changes, poor documentation, unreported incidents, data-quality all impacted downstream users (analysts, data scientists, consumers of internal reports). These problems slowed us down.</p>
<p>I believe this was the right approach, and I was pleased to see the book echo this idea.</p>
</section>
<section id="vocabulary" class="level3">
<h3 class="anchored" data-anchor-id="vocabulary">Vocabulary</h3>
<p>I had never encountered the terms used in this book to describe tables, techniques, columns, etc. I knew about fact tables and dimension tables. However, I had never heard of <em>outrigger dimensions</em>, didn‚Äôt know that fact tables had different names like <em>accumulating snapshot fact table</em>. When I saw the word <em>grain</em>, I immediately understood what it described, but I don‚Äôt think I ever heard this term. I definitely used the word <em>level</em> myself (at the user <em>level</em>, at the hit <em>level</em>) and I had discussions where <em>granularity</em> came up.</p>
<p>In a past project, without being aware of it at the time, I asked our central data engineering teams to improve an <em>outrigger dimension</em> for product certificates. I asked for the slow-changing dimension to go from <em>Type 1 overwrite</em> to <em>Type 2 add new row</em>. But we never discussed the change in those terms. We talked about ‚Äúmaking the historical relationship between products and certificates available for analysis‚Äù. We wanted to <em>historicise</em> the table. This word was difficult to pronounce correctly in meetings.</p>
<p>Why didn‚Äôt we use this vocabulary?</p>
<ul>
<li>Could these terms be confined to data engineering circles and left behind when other disciplines are involved?</li>
<li>Are these words in books, but rarely found in the field?</li>
<li>This is a book written by authors from the USA and my work experience is in Germany and France with lots of native and non-native english speakers. Could it be the reason?</li>
</ul>
</section>
<section id="user-experience-improvements" class="level3">
<h3 class="anchored" data-anchor-id="user-experience-improvements">User experience improvements</h3>
<p>As a long-time user, I was very happy to read the following advice. The points will improve your end users‚Äô life and save them from making mistakes:</p>
<ul>
<li><p>Provide human-understandable labels in addition to the technical codes and abbreviations. Quoting from the book:</p>
<blockquote class="blockquote">
<p>Cryptic abbreviations, true/false flags, and operational indicators should be supplemented in dimension tables with full text words that have meaning when independently viewed. Operational codes with embedded meaning within the code value should be broken down with each part of the code expanded into its own separate descriptive dimension attribute.</p>
</blockquote></li>
<li><p>Similarly, the book describes three different ways to handle <em>Null</em> values that make a ton of sense:</p>
<ol type="1">
<li>In dimension tables, the authors recommend substituting <em>Unknown</em> or <em>Not Applicable</em> in place of the null value. This applies when a dimension row is incomplete or when some attributes don‚Äôt apply to all rows.</li>
<li>Foreign key columns should never include nulls. Otherwise, <em>referential integrity</em> is broken i.e.&nbsp;all fact rows should be associated with all the corresponding dimensions.</li>
<li>In fact tables, numeric measurements can be left null because calculations like sums and averages will correctly handle it. Replacing null with a 0 would bias the average, for example.</li>
</ol></li>
<li><p>Provide a <em>Date</em> dimension so that users can easily filter or group by date-related attributes. I like an easy way to access weekend vs.&nbsp;weekdays , the full name for days (Monday, Tuesday, ‚Ä¶), months (January, February, ‚Ä¶) or even quarters (2026 Q1, 2026 Q2, ‚Ä¶) with a simple join. Even better if public holidays can be accessed or if dates important to the business can be retrieved. I have parsed and formatted dates countless times in SQL or Python, just to extract details like month names.</p></li>
<li><p>Finally, in the last chapter of the book, the authors focus on the implications that big data has on data warehouses and ETL systems. While doing so, they write ‚ÄúAdd value to data as soon as possible‚Äù:</p>
<blockquote class="blockquote">
<p>You should apply filtering, cleansing, pruning, conforming, matching, joining, and diagnosing at the earliest touch points possible. [‚Ä¶] Conforming takes the active step of placing highly administered enterprise attributes into major entities such as customer, product, and date. The existence of these conformed attributes allows high value joins to be made across separate application domains. A shorter name for this step is ‚Äúintegration!‚Äù Diagnosing allows many interesting attributes to be added to data, including special confidence tags and textual identifiers representing behavior clusters identified by a data mining professional.</p>
</blockquote>
<p>In my experience, data science teams often extract data from the warehouse, create insights in silos, and rarely return those insights to the warehouse. As a result, teams often duplicate work in silos or get stuck because they cannot reproduce time-intensive research or advanced data science. I appreciate the idea of enriching data as early as possible, especially by integrating results from company-wide data mining activities.</p></li>
</ul>


</section>
</section>

 ]]></description>
  <category>data engineering</category>
  <category>books</category>
  <guid>https://garytouet.com/post/2026/data-warehouse-toolkit-definitive-guide-to-dimensional-modelling/</guid>
  <pubDate>Thu, 29 Jan 2026 00:00:00 GMT</pubDate>
</item>
<item>
  <title>‚ÄòWhat‚Äôs new in pandas 3‚Äô</title>
  <dc:creator>Gary Touet</dc:creator>
  <link>https://garytouet.com/link/2026/01/29/</link>
  <description><![CDATA[ 




<p>Two highlights for me:</p>
<section id="the-annoying-settingwithcopywarning" class="level3">
<h3 class="anchored" data-anchor-id="the-annoying-settingwithcopywarning">The annoying <code>SettingWithCopyWarning</code></h3>
<p>I encourage you to read Marc Garcia‚Äôs blog post, because he gives an example that triggers this warning message. I was puzzled by it more than once and opted for the recommended:</p>
<blockquote class="blockquote">
<p>Try using .loc[row_indexer,col_indexer] = value instead</p>
</blockquote>
<p>And</p>
<blockquote class="blockquote">
<p>Consistently copy after every operation using df = df.copy().</p>
</blockquote>
<p>I am glad to see that this will not be needed anymore in pandas 3. Hell yeah!</p>
<blockquote class="blockquote">
<p>After countless hours of work that began well before pandas 3, copy‚Äëon‚Äëwrite is now fully implemented. The warning is gone, and all the .copy() calls in pandas code can be safely avoided after moving to pandas 3.</p>
</blockquote>
</section>
<section id="method-chaining" class="level3">
<h3 class="anchored" data-anchor-id="method-chaining">Method chaining</h3>
<p>This additional syntax gets me closer to what I‚Äôm used to in R.</p>
<blockquote class="blockquote">
<p>[‚Ä¶] Other libraries such as Polars and PySpark address this more cleanly using a col() expression API.</p>
<p>pandas 3 introduces the same mechanism:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1">(</span>
<span id="cb1-2">  pandas.read_parquet(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rooms.parquet"</span>)</span>
<span id="cb1-3">         [(pandas.col(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"property_type"</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hotel"</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (pandas.col(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"country"</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"us"</span>)]</span>
<span id="cb1-4">         .assign(max_people<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pandas.col(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max_people"</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> pandas.col. (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max_children"</span>))</span>
<span id="cb1-5">)</span></code></pre></div></div>
<p>This is a significant step forward, making pandas code much more readable, in particular when using method chaining.</p>
</blockquote>
<p>I like how just 3 lines let me read a local file, filter rows, and add a new column. No intermediary dataframes required.</p>
<p>The new <code>pandas.col()</code> lets us refer to column names directly, without prefixing the dataframe name. It‚Äôs not my favourite, but I‚Äôll take the simplification. In R‚Äôs tidyverse, you just use the column name. No need for a dataframe prefix or extra function. It‚Äôs cleaner and more intuitive.</p>


</section>

 ]]></description>
  <category>link</category>
  <category>python</category>
  <guid>https://garytouet.com/link/2026/01/29/</guid>
  <pubDate>Thu, 29 Jan 2026 00:00:00 GMT</pubDate>
</item>
<item>
  <title>My selection of posit::conf(2025) talks to watch on YouTube</title>
  <dc:creator>Gary Touet</dc:creator>
  <link>https://garytouet.com/post/2025/posit-conf-2025-my-selection-of-youtube-talks/</link>
  <description><![CDATA[ 




<p>Posit is the company behind RStudio and many widely-used R packages (such as <em>ggplot2</em>, the <em>tidyverse</em>). They also develop tools for other languages like Python (including their new data science IDE called <a href="https://positron.posit.co"><em>Positron</em></a>, and <em>plotnine</em>, their port of <em>ggplot2</em> to Python). In short, they create a lot of useful tools for the data science community.</p>
<p>Every year, they organise a conference, and they just released the recordings of this year‚Äôs talks on <a href="https://www.youtube.com/playlist?list=PL9HYL-VRX0oTixlfDPCS5RW_F1pccERRe">YouTube</a>.</p>
<p>Here are my recommended talks (in no particular order):</p>
<ul>
<li><p><a href="https://www.youtube.com/watch?v=pMVYl9fx1EE">How I got unstuck with Python (Julia Silge, Posit)</a></p>
<p>As I mentioned in a previous post, I started learning Python after R and <a href="../../../../link/2025/11/19/python-not-great-package-for-data-science/index.qmd">found some key differences between the two languages challenging</a>. Finding the right tools was also challenging. Julia Silge highlights <em>pyenv</em> as a turning point for her and it was for me too.</p>
<p>On macOS, Python isn‚Äôt pre-installed. Instead, it comes with the Command Line Tools, which must be installed separately. This made me feel uncomfortable. I didn‚Äôt like messing with the system‚Äôs python version (installing and uninstalling libraries). Also, the version was quite old (2.x) when I set up my local environment. Then I discovered <em>pyenv</em> and the concept made sense : it‚Äôs possible to install separate Python versions and to create isolated virtual environments. That‚Äôs what I chose, and still use today. Though maybe not much longer.</p>
<p>Julia Silge has moved to using <em>uv</em>. I have read so many good things about it. It is next on my list.</p></li>
<li><p><a href="https://www.youtube.com/watch?v=Lo4vewuapI8">From messy to meaningful data: LLM-powered classification in R (Dylan Pieper)</a></p>
<p>The talk covers more, but it served as a good introduction to the <a href="https://ellmer.tidyverse.org"><em>ellmer</em> package</a> for me: how to interact with LLMs and get structured output in R. I also enjoyed the rest of the talk, especially the speaker‚Äôs use of traditional ML models as benchmark against the LLM.</p></li>
<li><p><a href="https://www.youtube.com/watch?v=D3UAslMqEZc">Posit and the modern data stack: Using Posit, Snowflake, and Databricks (James Blair)</a></p>
<p>Here, the title is a bit misleading. The talk focuses on something more exciting: a Positron feature called <em>Positron Assistant</em>, which provides LLM-assisted coding and data analysis.</p>
<p>So far, these assistants required data to be available locally, which is a very unlikely scenario when working with enterprise data sources (data volumes are too large, downloading data is a privacy and security no-go).</p>
<p>In the demo, James Blair shows how the assistant can work with the data available in Databricks or Snowflake. You need to set the connection up first and then it will work off of the table names, table schemas and a small sample of data. It then produces code that will run on the Databricks cluster for example.</p>
<p>This feels like a nice step forward. It looks like the integration required a collaboration between Posit, Databricks and Snowflake. I‚Äôm still unclear about what enterprises need to do to implement this, and what metadata must be provided if any. Nevertheless, it‚Äôs an interesting development. Of course, the performance of these LLMs in this scenario remains to be seen.</p></li>
<li><p><a href="https://www.youtube.com/watch?v=u9ev3mvC-p0">Expanding Quarto‚Äôs Capabilities with Lua (Christophe Dervieux, Posit)</a></p>
<p>I built my website using <a href="https://quarto.org">Quarto</a>. During the process, I encountered limitations and came across mentions of Lua filters and Quarto extensions. I decided to explore these more advanced topics later. My main goal was simply to get the site online.</p>
<p>Christophe Dervieux‚Äôs talk was a great introduction for me. While I‚Äôm not yet confident enough to develop with Lua filters, I now understand their role. It was helpful to see the pipeline that transforms <code>.qmd</code> documents into HTML, and where Lua filters come into play.</p></li>
</ul>



 ]]></description>
  <category>R</category>
  <category>python</category>
  <guid>https://garytouet.com/post/2025/posit-conf-2025-my-selection-of-youtube-talks/</guid>
  <pubDate>Fri, 05 Dec 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>‚ÄòPython is not a great language for data science‚Äô</title>
  <dc:creator>Gary Touet</dc:creator>
  <link>https://garytouet.com/link/2025/11/19/python-not-great-package-for-data-science/</link>
  <description><![CDATA[ 




<p>Here, I link to the second post from Claus Wilke in his series ‚Äú<em>Python is not a great language for data science.</em>‚Äù</p>
<p>I have read various posts about the differences between R and Python over the years and the details are usually too obscure for me. The inner workings of these languages are dissected in a way that I cannot relate to.</p>
<p>In this case, I did relate to it. I can recommend the article to anyone in data science who has to evolve between R and Python. Claus described issues I‚Äôve encountered without fully understanding them.</p>
<p>The points that caught my attention are:</p>
<ul>
<li><a href="https://blog.genesmindsmachines.com/i/178823064/call-by-reference-semantics">Call-by-reference semantics</a>: the fact that calling a function on a data object will modify the object passed as argument, even when no assignment to a new variable is done.</li>
<li><a href="https://blog.genesmindsmachines.com/i/178823064/lack-of-built-in-missing-values">Lack of built-in missing values</a>: different data analysis libraries treat missing values differently and make assumptions which are not obvious</li>
<li><a href="https://blog.genesmindsmachines.com/i/178823064/lack-of-non-standard-evaluation">Lack of non-standard evaluation</a>: <code>mutate()</code> and <code>arrange()</code>in the tidyverse make common data science tasks so much easier to do and read. The syntax is cleaner too.</li>
</ul>
<p>Finally, don‚Äôt get me wrong, I am not ditching Python at all. I enjoy using it. It‚Äôs good to put words on frustrations and misunderstandings I‚Äôve had in the past.</p>
<hr>
<p>In addition, in Claus‚Äô <a href="https://blog.genesmindsmachines.com/p/python-is-not-a-great-language-for">first post</a> from the series, another topic hit close to home:</p>
<blockquote class="blockquote">
<p>So here is a typical experience I commonly have with students who use Python. A student comes to my office and shows me some result. I say ‚ÄúThis is great, but could you quickly plot the data in this other way?‚Äù or ‚ÄúCould you quickly calculate this quantity I just made up and let me know what it looks like when you plot it?‚Äù or similar. Usually, the request I make is for something that I know I could do in R in just a few minutes. Examples include converting boxplots into violins or vice versa, turning a line plot into a heatmap, plotting a density estimate instead of a histogram, performing a computation on ranked data values instead of raw data values, and so on. Without fail, from the students that use Python, the response is: ‚ÄúThis will take me a bit. Let me sit down at my desk and figure it out and then I‚Äôll be back.‚Äù Now let me be absolutely clear: These are strong students. The issue is not that my students don‚Äôt know their tools. It very much seems to me to be a problem of the tools themselves. They appear to be sufficiently cumbersome or confusing that requests that I think should be trivial frequently are not.</p>
</blockquote>
<p>This happened to me too. At first, I thought the problem was coming from me. I am used to R‚Äôs <em>ggplot2</em> library for data visualisation and I felt really slow in Python.</p>
<p>In a footnote, Claus Wilke notes that students who use <em>plotnine</em> do not have this problem. This matches with my own experience. <em>Plotnine</em> is a port of <em>ggplot2</em> in Python. And it is now my first choice.</p>
<p>At first, I tried to learn <em>matplotlib</em> and I quickly realised that this was a no-go for me (simple plots were hard to build, commands hard to remember for me). Then, I saw many people recommend <em>seaborn</em>, which is based on <em>matplotlib</em>. It is better and more intuitive for me, but I still find working with it to be hard. I struggle especially when it comes to facets.</p>
<p>Let‚Äôs say you plot aggregated data over several countries. And you want to see if there are differences between countries. In <em>ggplot2</em>, you don‚Äôt need to change much in your current code. One line of code allows you to facet by the dimension <code>country</code> and it‚Äôs easy to facet by two dimensions if needed.</p>
<p>In <em>seaborn</em>, some plotting functions support something similar, but not all of them do, which complicates things. Otherwise, you need to create a <code>FacetGrid</code> object, which is a slightly different way of building a plot. And then, on top of that, adding a plot title is done differently when the plot has facets.</p>
<p>All of this requires to memorise different commands for different use cases. And it‚Äôs a big slow down for me. So I relate to the example given above and I would also recommend <em>plotnine</em>. My only gripe is that is updated on a different schedule than R‚Äôs <em>ggplot2</em> and both can be sometimes out of sync. It only happened to me once though that something that I knew was possible in <em>ggplot2</em> was not in <em>plotnine</em>.</p>



 ]]></description>
  <category>link</category>
  <category>python</category>
  <category>R</category>
  <guid>https://garytouet.com/link/2025/11/19/python-not-great-package-for-data-science/</guid>
  <pubDate>Wed, 19 Nov 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Analysing the sound of my fridge</title>
  <dc:creator>Gary Touet</dc:creator>
  <link>https://garytouet.com/post/2025/fridge-sound-analysis/</link>
  <description><![CDATA[ 




<section id="backstory" class="level2">
<h2 class="anchored" data-anchor-id="backstory">Backstory</h2>
<p>This is a fun little project that I wanted to try for a bit now. You see, my fridge at home is very old. It has always been noisy, but I‚Äôve been able to ignore it for many years.</p>
<p>However, lately, something changed. It feels like the compressor runs louder and more frequently than before (too high of a frequency according to my nerves).</p>
<p>I wanted to quantify two things:</p>
<ol type="1">
<li>How long the compressor runs for each time,</li>
<li>How long between each compressor run.</li>
</ol>
<p>I tried timing it manually, but I ran into issues and I didn‚Äôt trust my measurements to be accurate. It‚Äôs tedious to stay alert to a fridge‚Äôs background hum while at home. üòÉ</p>
<p>I wanted something more scientific and decided to use my iPad and the <em>Voice Memos</em> app to record the sound. I had the vague idea that with the sound waves and timestamps I could reach my goals.</p>
<p>To make this easy, I wanted to record for rather long periods of time and to have clean recordings. So I left the iPad record while I was away for most of the day.</p>
<p>My first idea was to do my analysis with the <em>naked</em> eye, but later I decided that it would be more fun to find a programmatic way to do it. I wanted to put my recently-acquired Mistral AI subscription to the test.</p>
</section>
<section id="mistral-ai" class="level2">
<h2 class="anchored" data-anchor-id="mistral-ai">Mistral AI</h2>
<p>The company and its models are often mentioned as <a href="https://madebuy.eu/european/ai-chatbots/">European alternatives to US firms and their models</a>. I wanted to give it a go and get familiar with it. In addition, Mistral and I are both born in France. These were enough reasons for me to sign up to the <em>Pro</em> tier and to start experimenting.</p>
<p>My setup was:</p>
<ul>
<li>Local machine (Macbook Air M3)</li>
<li>Working in Python inside Visual Studio Code</li>
<li>Using <em>Codestral</em> within VS Code itself <sup>1</sup></li>
</ul>
<p><em>Codestral</em> is Mistral AI‚Äôs <code>generative AI model explicitly designed for code generation tasks</code>.</p>
<p>I went into this with prior Python coding knowledge, but I had never done any audio processing with it. So I gave the LLM a broad description of what I wanted to achieve. I didn‚Äôt recommend packages, or specific methods. I only described what I had and what I wanted to achieve very broadly.</p>
<p>Initial prompt:</p>
<blockquote class="blockquote">
<p>I have a file ‚Äú.m4a‚Äù which is a recording of my fridge at home. I want to analyse the sound inside of this file to identify each time the fridge‚Äôs compressor runs. The sound is very distinctive and I know that in this file there are two compressor runs which lasts very long times. What should I do in Python?</p>
</blockquote>
<p>I‚Äôll cut the story short, it disappointed me for the task at hand:</p>
<ol type="1">
<li>I spent a few hours re-prompting, giving more precise instructions, explicitly asking for things and I never managed to get to something useful. The script was producing code that worked. All the packages used were safe and well-known. It was ‚Äúanalysing‚Äù my audio file and producing good data visualisations, but it couldn‚Äôt identify the compressor runs properly.</li>
<li>The code produced was very slow to run. It took between 5 and 10 mins each time. This made debugging and iterating very slow.</li>
<li>Finally, in a different session, I tried prompting Mistral on the web. I supposed that my configuration in VS Code might be faulty. At first, it gave me interesting results, but I still stumbled in the last mile and couldn‚Äôt get to something useful.</li>
</ol>
<blockquote class="blockquote">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/fridge-sound-analysis/output-codestral.png" class="img-fluid figure-img"></p>
<figcaption>Last analysis generated before I gave up. The dashed red line is supposed to be a threshold used for detection. However, it does not seem to matter since data below the threshold is highlighted as <em>compressor run</em>‚Ä¶</figcaption>
</figure>
</div>
</blockquote>
</section>
<section id="claude-to-the-rescue" class="level2">
<h2 class="anchored" data-anchor-id="claude-to-the-rescue">Claude to the rescue!</h2>
<p>Frustrated, I decided to copy and paste my initial prompt in Claude‚Äôs web UI. I am not a paying subscriber so I am using <code>Claude Sonnet 4.5</code> on the free tier.</p>
<p>And‚Ä¶ To my surprise, it worked in 7 iterations. ü•≤</p>
<ol type="1">
<li><p>The very first script that it generated was much faster than the one from Codestral: less than ten seconds vs.&nbsp;several minutes before.</p></li>
<li><p>Its first attempt produced a graph that didn‚Äôt show which sections of the audio were identified as compressor runs. After I asked for it, it produced code that generated this graph. It was very easy to go from there to a finished analysis.</p>
<blockquote class="blockquote">
<p><img src="https://garytouet.com/post/2025/fridge-sound-analysis/output-claude-first-attempt.png" class="img-fluid"></p>
</blockquote></li>
<li><p>It produced parameters that I could manually tune. It explained to me what these parameters were doing with example values to illustrate. For example:</p>
<blockquote class="blockquote">
<p>Lower (e.g., 60): More sensitive, catches quieter compressor runs but may have false positives</p>
<p>Higher (e.g., 80-90): Only catches louder/clearer runs, fewer false positives</p>
</blockquote></li>
<li><p>After my 7th iteration, I had this output (pretty clean!):</p>
<blockquote class="blockquote">
<p><img src="https://garytouet.com/post/2025/fridge-sound-analysis/output-claude-end.png" class="img-fluid"></p>
<p>Total segments above threshold: 11</p>
<p>Segments after filtering (‚â•900s): 2</p>
<p>Detected 2 compressor run(s):</p>
<ul>
<li>Run 1: 18.07min - 49.33min (duration: 31.27min)</li>
<li>Run 2: 132.93min - 164.40min (duration: 31.47min)</li>
</ul>
Time between runs:
<ul>
<li>Between Run 1 and Run 2: 83.60min</li>
</ul>
</blockquote></li>
</ol>
<p>The code generated by Claude was better because:</p>
<ol type="1">
<li>The detection method worked much better from the get-go. And the code generated ran fast from the start too.</li>
<li>It used parameters whose values were based on my audio file. For example, the detection threshold was the nth percentile of a metric computed on the audio data itself. Manually tuning this percentile threshold was intuitive too.</li>
<li>It even proactively handled an edge case: what if the recording stops before the end of a compressor run.</li>
<li>I have the feeling that Claude was more responsive to my input and request for change too. Maybe this has to do with a difference in the length of the context windows (6 times longer for Claude Sonnet 4.5 vs.&nbsp;Codestral in my use case)<sup>2</sup>.</li>
</ol>
<p>In any case, this provided me with good findings and lessons learned for future projects, especially if I want to persevere with Mistral.</p>
</section>
<section id="back-to-the-analysis" class="level2">
<h2 class="anchored" data-anchor-id="back-to-the-analysis">Back to the analysis</h2>
<p>I pointed the final script (code generated by Claude with my manual parameter-tuning) to a recording that lasts eight hours and thirty minutes:</p>
<div id="f19f1f71" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> librosa</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. Load the audio file</span></span>
<span id="cb1-6">audio, sr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> librosa.load(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"audio/fridge-1-clean.m4a"</span>, sr<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>)</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. Calculate RMS energy over time windows</span></span>
<span id="cb1-9">frame_length <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adjust this</span></span>
<span id="cb1-10">hop_length <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adjust this</span></span>
<span id="cb1-11">rms <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> librosa.feature.rms(y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>audio, frame_length<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>frame_length, hop_length<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>hop_length)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb1-12"></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. Detect high-energy periods (compressor running)</span></span>
<span id="cb1-14">threshold <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.percentile(rms, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">65</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adjust this</span></span>
<span id="cb1-15">is_running <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rms <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> threshold</span>
<span id="cb1-16"></span>
<span id="cb1-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. Get time values</span></span>
<span id="cb1-18">times <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> librosa.frames_to_time(np.arange(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(rms)), sr<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>sr, hop_length<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>hop_length)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 5. Extract running segments</span></span>
<span id="cb1-21">running_segments <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb1-22">start <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb1-23"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i, running <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(is_running):</span>
<span id="cb1-24">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> running <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> start <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb1-25">        start <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> i</span>
<span id="cb1-26">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">elif</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> running <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> start <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb1-27">        running_segments.append((times[start], times[i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]))</span>
<span id="cb1-28">        start <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb1-29"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> start <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Handle case where recording ends while running</span></span>
<span id="cb1-30">    running_segments.append((times[start], times[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]))</span>
<span id="cb1-31"></span>
<span id="cb1-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 6. FILTER BY MINIMUM DURATION</span></span>
<span id="cb1-33">min_duration <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">900</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds - adjust this based on your compressor</span></span>
<span id="cb1-34">running_segments_filtered <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb1-35">    (start, end) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> start, end <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> running_segments <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (end <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> start) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> min_duration</span>
<span id="cb1-36">]</span>
<span id="cb1-37"></span>
<span id="cb1-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 7. Create mask for filtered segments only</span></span>
<span id="cb1-39">is_running_filtered <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.zeros_like(is_running, dtype<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">bool</span>)</span>
<span id="cb1-40"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> start_time, end_time <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> running_segments_filtered:</span>
<span id="cb1-41">    mask <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (times <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> start_time) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (times <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> end_time)</span>
<span id="cb1-42">    is_running_filtered <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|=</span> mask</span>
<span id="cb1-43"></span>
<span id="cb1-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 8. Visualize with highlighted compressor runs</span></span>
<span id="cb1-45">plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>))</span>
<span id="cb1-46"></span>
<span id="cb1-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot the RMS energy in minutes</span></span>
<span id="cb1-48">times_minutes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> times <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span></span>
<span id="cb1-49">plt.plot(times_minutes, rms, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>, linewidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMS Energy"</span>)</span>
<span id="cb1-50"></span>
<span id="cb1-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Highlight filtered compressor running periods</span></span>
<span id="cb1-52">plt.fill_between(</span>
<span id="cb1-53">    times_minutes,</span>
<span id="cb1-54">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb1-55">    rms,</span>
<span id="cb1-56">    where<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>is_running_filtered,</span>
<span id="cb1-57">    color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>,</span>
<span id="cb1-58">    alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>,</span>
<span id="cb1-59">    label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Compressor Running"</span>,</span>
<span id="cb1-60">)</span>
<span id="cb1-61"></span>
<span id="cb1-62">plt.axhline(threshold, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"orange"</span>, linestyle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--"</span>, linewidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Threshold"</span>)</span>
<span id="cb1-63">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Time (minutes)"</span>)</span>
<span id="cb1-64">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RMS Energy"</span>)</span>
<span id="cb1-65">plt.title(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Fridge Compressor Activity Detection (min duration: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>min_duration<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">s)"</span>)</span>
<span id="cb1-66">plt.legend()</span>
<span id="cb1-67">plt.grid(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>, alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>)</span>
<span id="cb1-68">plt.tight_layout()</span>
<span id="cb1-69">plt.show()</span>
<span id="cb1-70"></span>
<span id="cb1-71"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 9. Print detection summary</span></span>
<span id="cb1-72"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Total segments above threshold: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(running_segments)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-73"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Segments after filtering (‚â•</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>min_duration<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">s): </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(running_segments_filtered)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-74"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Detected </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(running_segments_filtered)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> compressor run(s):"</span>)</span>
<span id="cb1-75"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i, (start_time, end_time) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(running_segments_filtered, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>):</span>
<span id="cb1-76">    duration_minutes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (end_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> start_time) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span></span>
<span id="cb1-77">    start_minutes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> start_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span></span>
<span id="cb1-78">    end_minutes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> end_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span></span>
<span id="cb1-79">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(</span>
<span id="cb1-80">        <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"  Run </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>i<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>start_minutes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.2f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">min - </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>end_minutes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.2f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">min (duration: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>duration_minutes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.2f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">min)"</span></span>
<span id="cb1-81">    )</span>
<span id="cb1-82"></span>
<span id="cb1-83"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 10. Calculate and print time between runs</span></span>
<span id="cb1-84"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(running_segments_filtered) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>:</span>
<span id="cb1-85">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Time between runs:"</span>)</span>
<span id="cb1-86">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(running_segments_filtered) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>):</span>
<span id="cb1-87">        end_of_current <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> running_segments_filtered[i][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb1-88">        start_of_next <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> running_segments_filtered[i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb1-89">        gap_minutes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (start_of_next <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> end_of_current) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span></span>
<span id="cb1-90">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"  Between Run </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> and Run </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>i <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>gap_minutes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.2f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">min"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/fridge-sound-analysis/index_files/figure-html/cell-2-output-1.png" width="854" height="278" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Total segments above threshold: 267
Segments after filtering (‚â•900s): 4

Detected 4 compressor run(s):
  Run 1: 67.60min - 103.00min (duration: 35.40min)
  Run 2: 186.40min - 222.13min (duration: 35.73min)
  Run 3: 307.53min - 341.60min (duration: 34.07min)
  Run 4: 427.20min - 460.67min (duration: 33.47min)

Time between runs:
  Between Run 1 and Run 2: 83.40min
  Between Run 2 and Run 3: 85.40min
  Between Run 3 and Run 4: 85.60min</code></pre>
</div>
</div>
<p>The compressor runs are easily identifiable in the plot and, as the red zones show, the detection mechanism works very well at identifying them.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>What we were all dying to know is now revealed to us. The compressor in my fridge runs for roughly 33-35 minutes each time and it runs every 83-85 minutes.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This is not natively supported and needs to be configured via Continue.dev‚Äôs extension (<a href="https://docs.mistral.ai/capabilities/code_generation?tab=codestral-integrations#explorer-tabs-integrations">documentation</a>).‚Ü©Ô∏é</p></li>
<li id="fn2"><p>Mistral‚Äôs documentation mentions <a href="https://mistral.ai/fr/news/codestral">32k for Codestral</a>. And Anthropic gives an example where <a href="https://docs.claude.com/en/docs/build-with-claude/context-windows#context-awareness-in-claude-sonnet-4-5-and-haiku-4-5">200k tokens are the size of the <em>standard</em> window</a>, which would correspond to my free tier.‚Ü©Ô∏é</p></li>
</ol>
</section></div> ]]></description>
  <category>python</category>
  <category>ai assisted coding</category>
  <category>fun project</category>
  <guid>https://garytouet.com/post/2025/fridge-sound-analysis/</guid>
  <pubDate>Fri, 14 Nov 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Anil Dash on today‚Äôs discourse regarding AI</title>
  <dc:creator>Gary Touet</dc:creator>
  <link>https://garytouet.com/link/2025/11/04/anil-dash-ai-majority-view/</link>
  <description><![CDATA[ 




<p>Anil Dash (emphasis is his):</p>
<blockquote class="blockquote">
<p>Most people who actually have technical roles within the tech industry, like engineers, product managers, and others who actually make the technologies we all use, are fluent in the latest technologies like LLMs. They aren‚Äôt the big, loud billionaires that usually get treated as the spokespeople for all of tech.</p>
<p>And what they all share is an extraordinary degree of consistency in their feelings about AI, which can be pretty succinctly summed up:</p>
<p><strong>Technologies like LLMs have utility, but the absurd way they‚Äôve been over-hyped, the fact they‚Äôre being forced on everyone, and the insistence on ignoring the many valid critiques about them make it very difficult to focus on legitimate uses where they might add value.</strong></p>
</blockquote>
<p>Definitely agree with him. It was refreshing to read.</p>
<p>These days, I spend more time than usual on LinkedIn and I follow the Tech news more consistently. I often question my own judgment and my own sanity while reading.</p>
<p>The amount of blind embrace for this technology in the mainstream‚Äôs discourse is astounding in my opinion. I‚Äôm looking forward to the next stage of the <a href="https://en.wikipedia.org/wiki/Gartner_hype_cycle">hype cycle</a>, when reality sets in and expectations lower, to have more interesting discussions.</p>



 ]]></description>
  <category>link</category>
  <category>ai</category>
  <guid>https://garytouet.com/link/2025/11/04/anil-dash-ai-majority-view/</guid>
  <pubDate>Tue, 04 Nov 2025 00:00:00 GMT</pubDate>
</item>
<item>
  <title>Creating the favicon for this website with ggplot2</title>
  <dc:creator>Gary Touet</dc:creator>
  <link>https://garytouet.com/post/2025/create-favicon-with-ggplot2/</link>
  <description><![CDATA[ 




<section id="favicon-what-is-it" class="level2">
<h2 class="anchored" data-anchor-id="favicon-what-is-it">Favicon ‚Äì what is it?</h2>
<p>Quoting from <a href="https://developer.mozilla.org/en-US/docs/Glossary/Favicon">Mozilla‚Äôs documentation</a>:</p>
<blockquote class="blockquote">
<p>A favicon (favorite icon) is a tiny icon included along with a website, which is displayed in places like the browser‚Äôs address bar, page tabs and bookmarks menu.</p>
<p>[‚Ä¶]</p>
<p>They are used to improve user experience and enforce brand consistency. When a familiar icon is seen in the browser‚Äôs address bar, for example, it helps users know they are in the right place.</p>
</blockquote>
</section>
<section id="what-kind-of-graphic-am-i-trying-to-create" class="level2">
<h2 class="anchored" data-anchor-id="what-kind-of-graphic-am-i-trying-to-create">What kind of graphic am I trying to create?</h2>
<p>I‚Äôm trying to re-create the favicon used for a previous iteration of my personal website:</p>
<ul>
<li>Square shape</li>
<li>Solid blue background color</li>
<li>My initials ‚ÄúGT‚Äù positioned on top, towards the bottom of the square.</li>
</ul>
<p>I‚Äôm starting simple. Should be doable, right?</p>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<p>Installing and loading <code>ggplot2</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ggplot2'</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot2"</span>)</span></code></pre></div></div>
</div>
<p>Here, I set the default size of my plots for the rest of the document. It is an important setting since I will generate a square icon and, <a href="https://quarto.org/docs/computations/execution-options.html#figure-options">by default, dimensions are 7 x 5 inches</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>opts_chunk<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set</span>(</span>
<span id="cb2-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fig.width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb2-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fig.height =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb2-4">)</span></code></pre></div></div>
</div>
</section>
<section id="creating-the-graphic" class="level2">
<h2 class="anchored" data-anchor-id="creating-the-graphic">Creating the graphic</h2>
<p>I decided to tackle the blue background first. I remembered that ggplot has different <a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geoms</a> to create a square. I looked up the documentation and started coding.</p>
<p>I iterated through <code>geom_raster()</code>, <code>geom_rect()</code> and landed on <code>geom_tile()</code>. It is best suited for my use case. I just need to define the size of the square and use the origin (0,0) as the center of the square.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">square_size <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb3-2">my_blue <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#0063dc"</span></span>
<span id="cb3-3"></span>
<span id="cb3-4">(p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(</span>
<span id="cb3-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> square_size, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> square_size),</span>
<span id="cb3-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> my_blue</span>
<span id="cb3-8">  ))</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p>Now, I will 1) add the text, position it, and then 2) remove all plot elements like grid lines, axes, etc.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">(p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb4-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb4-4">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb4-5">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>square_size <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb4-6">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GT"</span>,</span>
<span id="cb4-7">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Inter"</span>,</span>
<span id="cb4-8">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb4-9">    ),</span>
<span id="cb4-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb4-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> square_size <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb4-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size.unit =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'in'</span></span>
<span id="cb4-13">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>()</span>
<span id="cb4-15">)</span></code></pre></div></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p>Voil√†!</p>
<p>On purpose, I defined the position of the text and its size as a factor of the variable <code>square_size</code>. I hope that it will make it easier to export this graphic in different sizes after.</p>
<p>Regarding the font, I‚Äôm using <a href="https://rsms.me/inter/">Inter</a>. I had to download and install it on Mac OS for it to become available in the plot.</p>
</section>
<section id="saving-in-various-sizes-and-formats" class="level2">
<h2 class="anchored" data-anchor-id="saving-in-various-sizes-and-formats">Saving in various sizes and formats</h2>
<p>This is when things get more complicated for two reasons:</p>
<ol type="1">
<li>No clear spec for favicons exists. It depends on browsers, mobile OSes. Different formats, different sizes.</li>
<li>Resizing a plot is not as straightforward as I thought</li>
</ol>
<section id="favicon-specs" class="level3">
<h3 class="anchored" data-anchor-id="favicon-specs">Favicon specs</h3>
<p>While browsing, I found various specs<sup>1</sup> for this favicon. I will spare you the details. In the end, I landed on the following:</p>
<ol type="1">
<li><code>favicon.ico</code> 32x32 (px)</li>
<li><code>favicon.png</code> 96x96 (px)</li>
<li><code>apple-touch-icon.png</code> 180x180 (px)</li>
<li><code>favicon.svg</code></li>
</ol>
</section>
<section id="scaling-issues" class="level3">
<h3 class="anchored" data-anchor-id="scaling-issues">Scaling issues</h3>
<p>So far, I‚Äôve set all my measurements in inches (figure size, font size). Now, my goal is to provide a size in pixels and to automatically resize and scale the icon accordingly.</p>
<p>The problem is‚Ä¶</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(</span>
<span id="cb5-2">  p,</span>
<span id="cb5-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filename =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"icons/favicon_problem.png"</span>,</span>
<span id="cb5-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'retina'</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#retina = 320, according to documentation</span></span>
<span id="cb5-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">96</span>,</span>
<span id="cb5-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">96</span>,</span>
<span id="cb5-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">units =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'px'</span></span>
<span id="cb5-8">)</span></code></pre></div></div>
</div>
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/icons/favicon_problem.png" class="img-fluid"></p>
<p>‚Ä¶ that the dimensions are good, but the proportions are not. With <code>ggsave</code> I can easily define the size in pixels, but this doesn‚Äôt change the font size in the plot.</p>
<p>Christophe Nicault‚Äôs article <a href="https://www.christophenicault.com/post/understand_size_dimension_ggplot2/">Understanding text size and resolution in ggplot2</a> explains very well what happens. They recommend to use a package called <code>ragg</code> and the <code>scaling</code> option.</p>
<p>I tried, but simply installing <code>ragg</code> created a big error<sup>2</sup> in Quarto and completely destroyed my ability to preview my post. I also played around with the <code>scale</code> option in <code>ggsave()</code>, to no avail.</p>
<p>As a result, I decided to handle the scaling myself.</p>
</section>
<section id="diy-scaling" class="level3">
<h3 class="anchored" data-anchor-id="diy-scaling">DIY scaling</h3>
<p>Since I‚Äôve defined sizes in inches when creating the graphic and since I want to express icon dimensions in pixels, I need to understand the relationship between inches and pixels first.</p>
<p>From <a href="https://www.christophenicault.com/post/understand_size_dimension_ggplot2/">Understanding text size and resolution in ggplot2</a>:</p>
<blockquote class="blockquote">
<p>The relation is : (size in inches) = (screen size in pixel) / PPI or (screen size in pixel) = DPI * (size in inches)</p>
</blockquote>
<p>In other words, if I want an icon with size 32 x 32 pixels, the conversion in inches will be <code>32 / 320 = 0.1</code> (with a resolution of 320). I can create a function that takes these two parameters as arguments, converts that to a measurement in inches and then passes that to <code>ggplot2</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Function that creates the icon with sizes in inches</span></span>
<span id="cb6-2">create_icon <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(square_size_inches) {</span>
<span id="cb6-3">  p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(</span>
<span id="cb6-5">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb6-6">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb6-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb6-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> square_size_inches,</span>
<span id="cb6-9">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> square_size_inches</span>
<span id="cb6-10">      ),</span>
<span id="cb6-11">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> my_blue</span>
<span id="cb6-12">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb6-14">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb6-15">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb6-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>square_size_inches <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb6-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GT"</span>,</span>
<span id="cb6-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Inter"</span>,</span>
<span id="cb6-19">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontface =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span></span>
<span id="cb6-20">      ),</span>
<span id="cb6-21">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb6-22">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> square_size_inches <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb6-23">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size.unit =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'in'</span></span>
<span id="cb6-24">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>()</span>
<span id="cb6-26"></span>
<span id="cb6-27">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(p)</span>
<span id="cb6-28">  }</span>
<span id="cb6-29"></span>
<span id="cb6-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Function that uses a size in pixels and a dpi to convert it into inches, create the icon and save it to disk</span></span>
<span id="cb6-31">create_and_save_icon <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(filename, size_pixels, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">320</span>) {</span>
<span id="cb6-32">  square_size_inches <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> size_pixels <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> dpi</span>
<span id="cb6-33">  icon <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_icon</span>(square_size_inches)</span>
<span id="cb6-34"></span>
<span id="cb6-35">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(</span>
<span id="cb6-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot =</span> icon,</span>
<span id="cb6-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filename =</span> filename,</span>
<span id="cb6-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> dpi,</span>
<span id="cb6-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> size_pixels,</span>
<span id="cb6-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> size_pixels,</span>
<span id="cb6-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">units =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'px'</span>,</span>
<span id="cb6-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bg =</span> my_blue <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#otherwise white outline in png</span></span>
<span id="cb6-43">  )</span>
<span id="cb6-44">}</span></code></pre></div></div>
</div>
<p>Let‚Äôs try it out!</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_and_save_icon</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filename =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icons/favicon_32x32.png'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size_pixels =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">320</span>)</span></code></pre></div></div>
</div>
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/icons/favicon_32x32.png" class="img-fluid"></p>
<p>It works! I can now generate the different sizes that I need.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">sizes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">96</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span>)</span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (size <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> sizes) {</span>
<span id="cb8-4">  filename <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icons/favicon_'</span>, size, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'x'</span>, size, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.png'</span>)</span>
<span id="cb8-5"></span>
<span id="cb8-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_and_save_icon</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filename =</span> filename, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size_pixels =</span> size, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">320</span>)</span>
<span id="cb8-7">}</span></code></pre></div></div>
</div>
<div class="quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/icons/favicon_32x32.png" class="img-fluid figure-img"></p>
<figcaption>favicon_32x32.png</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/icons/favicon_96x96.png" class="img-fluid figure-img"></p>
<figcaption>favicon_96x96.png</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/icons/favicon_180x180.png" class="img-fluid figure-img"></p>
<figcaption>favicon_180x180.png</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>And for the last one, the <code>.svg</code> version. Here, we‚Äôll use the base R built-in SVG graphics device:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">icon <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_icon</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">svg</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"icons/favicon.svg"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb9-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(icon)</span>
<span id="cb9-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">invisible</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dev.off</span>())</span></code></pre></div></div>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://garytouet.com/post/2025/create-favicon-with-ggplot2/icons/favicon.svg" class="img-fluid figure-img"></p>
<figcaption>favicon.svg</figcaption>
</figure>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Most complete article that I could find: RealFaviconGenerator‚Äôs <a href="https://realfavicongenerator.net/favicon-guides/understanding-favicon-elements">Understanding favicon elements</a>.‚Ü©Ô∏é</p></li>
<li id="fn2"><p><code>quarto preview</code> would throw a <code>segfault</code> error that I was not able to resolve.‚Ü©Ô∏é</p></li>
</ol>
</section></div> ]]></description>
  <category>R</category>
  <category>website</category>
  <guid>https://garytouet.com/post/2025/create-favicon-with-ggplot2/</guid>
  <pubDate>Thu, 25 Sep 2025 00:00:00 GMT</pubDate>
</item>
</channel>
</rss>
